(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{2:function(e,t,n){e.exports={App:"App_App__2ZwIn","App-logo":"App_App-logo__3pKOr","App-logo-spin":"App_App-logo-spin__2t341","App-header":"App_App-header__2FUvL","App-link":"App_App-link__3yvnr",container:"App_container__IXScX",headlinePrimary:"App_headlinePrimary__3kPhL",item:"App_item__138mh",button:"App_button__3LiN_",buttonSmall:"App_buttonSmall__2ioN8",buttonLarge:"App_buttonLarge__3GWSc",searchForm:"App_searchForm__6m8W1",label:"App_label__3-1P9",input:"App_input__14n91"}},24:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var c,a,r,l,o,i,s,u,p,b,d,j,h,m,O,f,g=n(1),y=n.n(g),x=n(17),_=n.n(x),E=(n(24),n(8)),S=n.n(E),v=n(18),I=n(4),w=n(5),T=n(19),A=n.n(T),C=n(2),L=n.n(C),R=n(0),N=function(e){var t=e.id,n=e.value,c=e.type,a=void 0===c?"text":c,r=e.isFocused,l=e.onInputChange,o=e.children,i=y.a.useRef();return y.a.useEffect((function(){r&&i.current&&i.current.focus()}),[r]),Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)("label",{htmlFor:t,className:L.a.label,children:o}),"\xa0",Object(R.jsx)("input",{ref:i,id:t,type:a,value:n,autoFocused:r,onChange:l,className:L.a.input})]})},F=function(e){var t=e.searchTerm,n=e.onSearchInput,c=e.onSearchSubmit;return Object(R.jsxs)("form",{onSubmit:c,className:L.a.searchForm,children:[Object(R.jsx)(N,{id:"search",value:t,isFocused:!0,onInputChange:n,children:Object(R.jsx)("strong",{children:"Search: "})}),Object(R.jsx)("button",{type:"submit",disabled:!t,className:"".concat(L.a.button," ").concat(L.a.buttonLarge),children:"Submit"})]})},k=["title","titleId"];function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e}).apply(this,arguments)}function H(e,t){if(null==e)return{};var n,c,a=function(e,t){if(null==e)return{};var n,c,a={},r=Object.keys(e);for(c=0;c<r.length;c++)n=r[c],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(c=0;c<r.length;c++)n=r[c],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function M(e,t){var n=e.title,y=e.titleId,x=H(e,k);return g.createElement("svg",P({id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 297 297",style:{enableBackground:"new 0 0 297 297"},xmlSpace:"preserve",ref:t,"aria-labelledby":y},x),n?g.createElement("title",{id:y},n):null,c||(c=g.createElement("g",null,g.createElement("path",{d:"M113.636,272.638c-2.689,0-5.267-1.067-7.168-2.97L2.967,166.123c-3.956-3.957-3.956-10.371-0.001-14.329l54.673-54.703 c1.9-1.9,4.479-2.97,7.167-2.97c2.689,0,5.268,1.068,7.169,2.969l41.661,41.676L225.023,27.332c1.9-1.901,4.48-2.97,7.168-2.97l0,0 c2.688,0,5.268,1.068,7.167,2.97l54.675,54.701c3.956,3.957,3.956,10.372,0,14.328L120.803,269.668 C118.903,271.57,116.325,272.638,113.636,272.638z M24.463,158.958l89.173,89.209l158.9-158.97l-40.346-40.364L120.803,160.264 c-1.9,1.902-4.478,2.971-7.167,2.971c-2.688,0-5.267-1.068-7.168-2.97l-41.66-41.674L24.463,158.958z"}))),a||(a=g.createElement("g",null)),r||(r=g.createElement("g",null)),l||(l=g.createElement("g",null)),o||(o=g.createElement("g",null)),i||(i=g.createElement("g",null)),s||(s=g.createElement("g",null)),u||(u=g.createElement("g",null)),p||(p=g.createElement("g",null)),b||(b=g.createElement("g",null)),d||(d=g.createElement("g",null)),j||(j=g.createElement("g",null)),h||(h=g.createElement("g",null)),m||(m=g.createElement("g",null)),O||(O=g.createElement("g",null)),f||(f=g.createElement("g",null)))}var B=g.forwardRef(M),U=(n.p,n(6)),D={NONE:function(e){return e},TITLE:function(e){return Object(U.sortBy)(e,"title")},AUTHOR:function(e){return Object(U.sortBy)(e,"author")},COMMENT:function(e){return Object(U.sortBy)(e,"num_comments").reverse()},POINT:function(e){return Object(U.sortBy)(e,"points").reverse()}},K=function(e){var t=e.item,n=e.onRemoveItem;return Object(R.jsxs)("div",{style:{display:"flex"},children:[Object(R.jsx)("span",{style:{width:"40%"},children:Object(R.jsx)("a",{href:t.url,children:t.title})}),Object(R.jsx)("span",{style:{width:"30%"},children:t.author}),Object(R.jsx)("span",{style:{width:"10%"},children:t.num_comments}),Object(R.jsx)("span",{style:{width:"10%"},children:t.points}),Object(R.jsx)("span",{style:{width:"10%"},children:Object(R.jsx)("button",{type:"button",onClick:function(){return n(t)},className:"".concat(L.a.button," ").concat(L.a.buttonSmall),children:Object(R.jsx)(B,{height:"18px",width:"18px"})})})]})},W=function(e){var t=e.list,n=e.onRemoveItem,c=y.a.useState({sortKey:"NONE",isReverse:!1}),a=Object(w.a)(c,2),r=a[0],l=a[1],o=function(e){var t=r.sortKey===e&&!r.isReverse;l({sortKey:e,isReverse:t})},i=D[r.sortKey],s=r.isReverse?i(t).reverse():i(t);return Object(R.jsxs)("div",{children:[Object(R.jsxs)("div",{style:{display:"flex"},children:[Object(R.jsx)("span",{style:{width:"40%"},children:Object(R.jsx)("button",{type:"button",onClick:function(){return o("TITLE")},className:"".concat(L.a.button," ").concat(L.a.buttonSmall),children:"Title"})}),Object(R.jsx)("span",{style:{width:"30%"},children:Object(R.jsx)("button",{type:"button",onClick:function(){return o("AUTHOR")},className:"".concat(L.a.button," ").concat(L.a.buttonSmall),children:"Author"})}),Object(R.jsx)("span",{style:{width:"10%"},children:Object(R.jsx)("button",{type:"button",onClick:function(){return o("COMMENT")},className:"".concat(L.a.button," ").concat(L.a.buttonSmall),children:"Comments"})}),Object(R.jsx)("span",{style:{width:"10%"},children:Object(R.jsx)("button",{type:"button",onClick:function(){return o("POINT")},className:"".concat(L.a.button," ").concat(L.a.buttonSmall),children:"Points"})}),Object(R.jsx)("span",{style:{width:"10%"},children:"Actions"})]}),s.map((function(e){return Object(R.jsx)(K,{item:e,onRemoveItem:n},e.objectID)}))]})},X="Welcome",z="to StoryFinder",J="query=",V=function(e){return e.substring(e.lastIndexOf("?")+1,e.lastIndexOf("&")).replace(J,"")},Y=function(e,t){return"".concat("https://hn.algolia.com/api/v1").concat("/search","?").concat(J).concat(e,"&").concat("page=").concat(t)},q=function(e,t){switch(t.type){case"STORIES_FETCH_INIT":return Object(I.a)(Object(I.a)({},e),{},{isLoading:!0,isError:!1});case"STORIES_FETCH_SUCCESS":return Object(I.a)(Object(I.a)({},e),{},{isLoading:!1,isError:!1,data:0===t.payload.page?t.payload.list:e.data.concat(t.payload.list),page:t.payload.page});case"STORIES_FETCH_FAILURE":return Object(I.a)(Object(I.a)({},e),{},{isLoading:!1,isError:!0});case"REMOVE_STORY":return Object(I.a)(Object(I.a)({},e),{},{data:e.data.filter((function(e){return t.payload.objectID!==e.objectID}))});default:throw new Error}},G=function(e){var t=e.lastSearches,n=e.onLastSearch;return Object(R.jsx)(R.Fragment,{children:t.map((function(e,t){return Object(R.jsx)("button",{type:"button",className:"".concat(L.a.button," ").concat(L.a.buttonSmall),onClick:function(){return n(e)},children:e},e+t)}))})},Z=function(){var e=function(e,t){var n=y.a.useState(localStorage.getItem(e)||t),c=Object(w.a)(n,2),a=c[0],r=c[1];return y.a.useEffect((function(){localStorage.setItem(e,a)}),[a,e]),[a,r]}("search","Hacker"),t=Object(w.a)(e,2),n=t[0],c=t[1],a=y.a.useState([Y(n,0)]),r=Object(w.a)(a,2),l=r[0],o=r[1],i=function(e,t){var n=Y(e,t);o(l.concat(n))},s=function(e){return e.reduce((function(e,t,n){var c=V(t);return 0==n?e.concat(c):c===e[e.length-1]?e:e.concat(c)}),[]).slice(-6).slice(0,-1)}(l),u=y.a.useReducer(q,{data:[],page:0,isLoading:!1,isError:!1}),p=Object(w.a)(u,2),b=p[0],d=p[1],j=y.a.useCallback(Object(v.a)(S.a.mark((function e(){var t,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d({type:"STORIES_FETCH_INIT"}),e.prev=1,t=l[l.length-1],e.next=5,A.a.get(t);case 5:n=e.sent,d({type:"STORIES_FETCH_SUCCESS",payload:{list:n.data.hits,page:n.data.page}}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),d({type:"STORIES_FETCH_FAILURE"});case 12:case"end":return e.stop()}}),e,null,[[1,9]])}))),[l]);y.a.useEffect((function(){j()}),[j]);return Object(R.jsxs)("div",{className:L.a.container,onScroll:function(e){var t=e.target;t.scrollHeight-t.scrollTop===t.clientHeight&&(b.isLoading?document.getElementById("loading").innerHTML="Loading...":function(){var e=l[l.length-1],t=V(e);i(t,b.page+1)}())},children:[Object(R.jsxs)("h1",{className:L.a.headlinePrimary,children:[X," ",z]}),Object(R.jsx)(F,{searchTerm:n,onSearchInput:function(e){c(e.target.value)},onSearchSubmit:function(e){i(n,0),e.preventDefault()}}),Object(R.jsx)(G,{lastSearches:s,onLastSearch:function(e){c(e),i(e,0)}}),b.isError&&Object(R.jsx)("p",{children:"Something went wrong..."}),Object(R.jsx)(W,{list:b.data,onRemoveItem:function(e){d({type:"REMOVE_STORY",payload:e})}}),Object(R.jsx)("p",{id:"loading"})]})},Q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,48)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,l=t.getTTFB;n(e),c(e),a(e),r(e),l(e)}))};_.a.render(Object(R.jsx)(y.a.StrictMode,{children:Object(R.jsx)(Z,{})}),document.getElementById("root")),Q()}},[[47,1,2]]]);
//# sourceMappingURL=main.8f17223b.chunk.js.map